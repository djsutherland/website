{% raw -%}
\documentclass[12pt]{article}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{libertine}

\usepackage[american]{babel}
\usepackage{csquotes}

\usepackage{fullpage}

\usepackage[utf8]{inputenc}
\usepackage{paralist}
\usepackage{ifthen}

\usepackage{fancyhdr}
\usepackage{lastpage}
\setlength{\headheight}{15pt}
\setlength{\headsep}{10pt}
\pagestyle{fancy}
\lhead{Dougal Sutherland}
\chead{\libertineSB{Publication List}}
\rhead{\scriptsize \url{http://dougal.me}}
\cfoot{\thepage{} of \pageref*{LastPage}}

\usepackage[colorlinks=true]{hyperref}

\usepackage[maxbibnames=9,doi=false,url=false,sorting=none,style=authortitle,dashed=false]{biblatex}
\DeclareNameAlias{author}{first-last}

\DeclareFieldFormat[misc]{title}{\mkbibquote{#1\isdot}}
\renewbibmacro{in:}{}

\newcommand{\bibeqcon}{\textcolor{red}{*}}
\renewcommand*{\mkbibnamegiven}[1]{%
  \ifitemannotation{me}
    {{\libertineSB{#1}}}
    {#1}}
\renewcommand*{\mkbibnamefamily}[1]{%
  \ifitemannotation{me}
    {{\libertineSB{#1}}}
    {#1}%
  \ifitemannotation{equal}
    {\bibeqcon}
    {}%
}

{% endraw %}

{%- set sections = [
  ["Dissertations", ["phd-thesis", "ba-thesis"]],
  ["Preprints", ["preprint"]],
  ["Journal and low-acceptance-rate conference papers", ["conference", "journal"]],
  ["Peer-reviewed workshop and high-acceptance-rate conference papers", ["workshop", "poster"]],
  ["Technical reports", ["tech-report", "course-project"]],
] -%}

{% for sec_name, sec_types in sections %}
  \DeclareBibliographyCategory{sec{{ loop.index }}}
  \addtocategory{sec{{ loop.index -}} }{
    {%- for paper in venue_type_map[sec_types] -%}
      {{- paper | bibtex_key(coauthors) -}}
      {%- if not loop.last -%},{%- endif -%}
    {%- endfor -%}
  }
{% endfor %}

{% raw %}
\addbibresource{../biblio-cv.bib}

\newcommand{\httpurl}[1]{\href{http://#1}{\nolinkurl{#1}}}
\newcommand{\httpsurl}[1]{\href{https://#1}{\nolinkurl{#1}}}

\begin{document}
\renewcommand{\thefootnote}{\fnsymbol{footnote}\fnsymbol{footnote}}
\setlength\bibitemsep{0.3\baselineskip}
In this list, \bibeqcon{} denotes equal contribution.
\nocite{*}
{% endraw %}

{% for sec_name, sec_types in sections %}
\printbibliography[category=sec{{ loop.index }},title={ {{- sec_name -}} },heading=subbibliography]{}
{% endfor %}

{% raw %}
\end{document}
{% endraw %}
