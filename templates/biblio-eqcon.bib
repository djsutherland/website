{% raw -%}
% This .bib uses \bibeqcon{} to mark equal contributions between authors.
% Usually, you don't actually want that in your bibliography, so this line
% makes that not render as anything. You could use e.g.
%   \newcommand{\bibeqcon}{$^*$}
% in your document's preable (before including this .bib) to actually show it.
@preamble{"\providecommand{\bibeqcon}{}"}
{% endraw %}

{# NOTE: remember to change Makefile if number of lines above is changed! #}
{%- for paper in papers -%}
{%- set venue = venues[paper.venue] -%}
    {%- if venue.type == "conference" or venue.type == "workshop" -%}
        @inproceedings
    {%- elif venue.type == "journal" -%} 
        @article
    {%- elif venue.type == "phd-thesis" -%}
        @phdthesis
    {%- elif venue.type == "ba-thesis" -%}
        @thesis
    {%- else -%}
        @misc
    {%- endif -%}
{
    {{- paper | bibtex_key(coauthors) -}},
    author = { {{- paper.authors | bibtex_authors(coauthors, '\\bibeqcon{}') -}} },
    title = { {{- paper.bibtex_title | default(paper.title) -}} },
    year = { {{- paper.year -}} },
    {%- if paper.arXiv %}
    archivePrefix = {arXiv},
    arxivId = { {{- paper.arXiv -}} },
    eprint = { {{- paper.arXiv -}} },
    {%- endif %}
    {{- paper.doi | maybe_wrap("\n    doi = {", "},") -}}
    {%- if venue.conference is defined %}
    booktitle = { {{- venue.name }} ({{ venues[venue.conference].short }} workshop)}
    {%- elif venue.type == "conference" or venue.type == "workshop" %}
    booktitle = { {{- venue.name -}} {{- venue.short | maybe_wrap(" (", ")") -}} },
    {%- elif venue.type == "journal" %}
    journal = { {{- venue.name -}} },
    {%- elif venue.type == "phd-thesis" %}
    type = {Ph.D. thesis},
    {%- elif venue.type == "ba-thesis" %}
    type = {B.A. thesis},
    {%- endif %}
    {{- paper.volume | maybe_wrap("\n    volume = {", "},") -}}
    {{- paper.number | maybe_wrap("\n    number = {", "},") -}}
    {{- paper.pages | maybe_wrap("\n    pages = {", "},") -}}
    {{- venue.school | maybe_wrap("\n    school = {", "},") -}}
    {{- venue.department | maybe_wrap("\n    department = {", "},") -}}
    {{- venue.bib_type | maybe_wrap("\n    type = {", "},") -}}
    {{- paper.official | maybe_wrap("\n    url = {", "},") -}}
{# make sure there's a newline here #}
}

{% endfor -%}
